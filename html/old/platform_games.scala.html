@import models.common.Game

@import models.common.Platform
@(platforms:List[Platform],games:List[Game])


<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title></title>
    <script src="@controllers.admin.routes.Assets.versioned("javascripts/platform.js")"></script>
    <script src="@controllers.admin.routes.Assets.versioned("javascripts/game.js")"></script>
    <script type="text/javascript">
    var platformArray = [];
    var index=0;
        @for((platform, index) <- platforms.zipWithIndex){
            var platformModel={
            id:'@platform.getPlatformID',
            name:'@platform.getName',
            iconURL:'@platform.getIconURL'
            };

            platformArray[index]=platformModel;
            index+=1;
        }
    function viewPlatformInfo(id){
    for(i=0;i<platformArray.length;i++) {
    var platformModel = platformArray[ i ] ;
    if ( platformModel[ "id" ] == ( id ) ) {
    showPlatformModel ( false, platformArray[ i ] )
    }
    }
    }
    </script>
    <script type="text/javascript">
    var gameArray = [];
    var platformsArray = [];
    var index = 0
        @for(game <- games){
            var x=0
            @for(game_platform<-game.getGame_platforms){
                platformsArray[x]= @game_platform.getPlatform.getPlatformID
                x+=1
            }
            var reviewArray=[];
            var y=0
            @for(review<-game.getReviews){
                var reviewModel= {
                reviewID:'@review.getReviewID',
                content:'@review.getContent',
                date:'@review.getDateWritten',
                memberName:'@review.getMember.getName'
                }
                reviewArray[y]= reviewModel
                y+=1
            }
            var gameModel={
            id:'@game.getGameID',
            title:'@game.getTitle',
            subtitle:'@game.getSubTitle',
            gameType:'@game.getGameType',
            imageURL:'@game.getImageURl',
            maxPlayers:'@game.getMaxPlayers',
            availableStatus:'@game.getAvailableStatus',
            reviews:reviewArray,
            platform:platformsArray,
            description:'@game.getDescription'
            };
            gameArray[index]=gameModel;
            index+=1
        }
    function viewGameInfo(id){
    for(i=0;i<gameArray.length;i++){
    var gameModel=gameArray[i];
    if(gameModel["id" ]==(id)){
    showGameModel(false,gameArray[i])
    }
    }
    }
    function viewGameReview(id){
    for(i=0;i<gameArray.length;i++){
    var gameModel=gameArray[i];
    if(gameModel["id" ]==(id)){
    showGameReviewModel(gameArray[i]["reviews"])
    }
    }
    }

    </script>
</head>

<body style="overflow : scroll ;">
    <ul class="tab-bar grey-tab" style="margin-top: 30px;">
        <li id="platform_overview" class="active" onclick="toggleView(0)" style="cursor : pointer ;">
            <a data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-home fa-2x"></i>
                </span>
                Overview
            </a>
        </li>
        <li id="platform_platform" onclick="toggleView(1)" style="cursor : pointer ;">
            <a data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-key fa-2x"></i>
                </span>
                Platforms
            </a>
        </li>
        <li id="platform_game" onclick="toggleView(2)" style="cursor : pointer ;">
            <a data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-gamepad fa-2x"></i>
                </span>
                Games
            </a>
        </li>
    </ul>

    <div>
        <div id="platformPanel" class="panel panel-default table-responsive">
            <div class="panel-heading" style=" height : 50px;">
                <label class="pull-left" style="margin-top: 8px;">Platform</label>
                <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                    <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                        @*Search :*@
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-right" style="width:100px;">
                            <span class="input-group-btn">
                                <button class="btn btn-success btn-sm" type="button" onclick="showPlatformModel(true,false);">
                                    <i class="fa fa-plus"></i>
                                    Add Platform
                                </button>
                            </span>
                        </div>
                    </label>
                    </div>
                </div>

            </div>
            <div class="panel-body">
                <table class="table table-bordered table-condensed table-hover table-striped">
                    <thead>
                        <tr>
                            <th width="50px">ID</th>
                            <th width="50px">Icon</th>
                            <th>Name</th>
                            <th>Usage Count</th>
                            <th>Equipment Count</th>
                            <th>Games Count</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for(platform<-platforms){
                            <tr onclick="viewPlatformInfo(@platform.getPlatformID)" style="cursor : pointer ;">
                                <td>@platform.getPlatformID</td>
                                <td><center><img src="@platform.getIconURL" width="30px" height="30px;"></center></td>
                                <td>@platform.getName</td>
                                <td>@platform.getPlatformUsage</td>
                                <td>@platform.getEquipments.size</td>
                                <td>@platform.getGamePlatforms.size</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    <div>
        <div id="gamePanel" class="panel panel-default table-responsive">
            <div class="panel-heading" style=" height : 50px;">
                <label class="pull-left" style="margin-top: 8px;">Games</label>
                <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                    <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                        @*Search :*@
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-right" style="width:100px;">
                            <span class="input-group-btn">
                                <button class="btn btn-success btn-sm" type="button" onclick="showGameModel(true,null);">
                                    <i class="fa fa-plus"></i>
                                    Add Games
                                </button>
                            </span>
                        </div>
                    </label>
                    </div>
                    Search :
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-right" style="width:200px;">
                            <input id="searchGameInput" class="input-sm form-control" type="text" placeholder="input text....">
                            <span class="input-group-btn">
                                <button  onclick="searchGame();" class="btn btn-success btn-sm" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </label>
                </div>

            </div>
            <div class="panel-body">
                <div id="games_row" class="row">
                    @for(game<-games){
                        <div class="col-sm-3 col-md-2 hvr-float-shadow transparentscrollbar" style="width:20%;cursor : pointer ;">
                            <div class="thumbnail" style="padding: 0px;height: auto">
                                <img  onclick="viewGameInfo(@game.getGameID)" src=@game.getImageURl width="100%" style="padding : 0px ;"  />
                                <div class="caption">
                                    <h3 onclick="viewGameInfo(@game.getGameID)"  style="margin-top: 0px">@game.getTitle</h3>
                                    <p onclick="viewGameInfo(@game.getGameID)" class="transparentscrollbar" onclick="" style="min-height : 160px;max-height : 160px ;overflow: auto">
                                        @game.getDescription
                                    </p>
                                    <p style="padding-top: 3px">|
                                        @for(game_platform <-game.getGame_platforms){
                                            <img onclick="viewGameInfo(@game.getGameID)" src=@game_platform.getPlatform.getIconURL height="30px" width="30px"> |
                                        }
                                        <br/>
                                        <b onclick="viewGameInfo(@game.getGameID)" >Up to @game.getMaxPlayers players</b><br/>
                                        <img  onclick="viewGameReview(@game.getGameID)" src="@controllers.admin.routes.Assets.versioned("images/ic_comment.png")" width="20px" height="20px" class="comment"/>
                                        @game.getReviews.size<b onclick="viewGameReview(@game.getGameID)" class="comment"> reviews</b>
                                    </p>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
            </div>
        </div>

    <div class="modal fade in" id="simpleModal" aria-hidden="false" style="display: none;">
        <div id="platformModel" class="modal-dialog" style="width: 700px;display: none">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Platform :</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Name</label>
                        <div class="col-lg-11">
                            <input id="platformModelName" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Icon URL</label>
                        <div class="col-lg-11">
                            <input id="platformModelIconURL" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                    </div>
                </div>
                <div class="modal-footer">
                    <a id="platformDelete" class="btn btn-danger btn-sm">Delete platform</a>
                    <a id="platformSave" class="btn btn-info btn-sm">Save changes</a>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
        <div id="gameModel" class="modal-dialog" style="width: 850px;display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Game :</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Name</label>
                        <div class="col-lg-5">
                            <input id="gameModelName" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Game type</label>
                        <div class="col-lg-5">
                            <input id="gameModelGameType" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Icon URL</label>
                        <div class="col-lg-11">
                            <input id="gameModelIconURL" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:80px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Description</label>
                        <div class="col-lg-11">
                            <textarea style="resize: none;" id="gameModelDescription" class="form-control" rows="4"></textarea>
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group"  style="height:100px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Platform</label>
                        <div class="col-lg-11">
                            <select id="gameModelPlatforms" multiple="" class="form-control" style="padding: 0px;">
                                @for(platform<-platforms){
                                    <option value="@platform.getPlatformID">@platform.getName</option>
                                }
                            </select>
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Max players</label>
                        <div class="col-lg-5">
                            <input id="gameModelPlayers" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Status</label>
                        <div class="col-lg-5">
                            <select id="gameModelStatus" class="form-control" style="padding: 0px;">
                                <option value="@Game.AvailableStatus.COMINGSSOON">COMINGS SOON</option>
                                <option value="@Game.AvailableStatus.AVAILABLE">AVAILABLE</option>
                                <option value="@Game.AvailableStatus.UNAVAILABLE">UNAVAILABLE</option>
                            </select>
                        </div><!-- /.col -->
                    </div>
                </div>
                <div class="modal-footer">
                    <a id="gameModelDelete" class="btn btn-danger btn-sm">Delete game</a>
                    <a id="gameModelSave" class="btn btn-info btn-sm">Save changes</a>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
        <div id="reviewModel" class="modal-dialog transparentscrollbar" style="display:none;width: 700px;overflow: visible">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Reviews :</h4>
                </div>
                <div class="modal-body">
                    <ul id="reviewList" class="chat">
                        <li class="left clearfix">
                            <span class="chat-img pull-left">
                                <img src="img/user.jpg" alt="User Avatar">
                            </span>
                            <div class="chat-body clearfix">
                                <div class="header">
                                    <strong class="primary-font">Moistyburger</strong>
                                    <small class="pull-right text-muted"><i class="fa fa-clock-o"></i> 2014-07-18</small>
                                </div>
                                <p>
										Wonderfull game of thrones..
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
</body>
</html>