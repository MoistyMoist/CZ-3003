@import models.common.Platform

@import models.common.Equipment
@import models.common.Venue
@import models.common.Room
@(venues:List[Venue],rooms:List[Room],equipments:List[Equipment],platforms:List[Platform])
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script src="@controllers.admin.routes.Assets.versioned("javascripts/room.js")"></script>
    <script src="@controllers.admin.routes.Assets.versioned("javascripts/equipment.js")"></script>
    <script type="text/javascript">
    var roomArray=[];
    index=0
        @for(room <- rooms) {
            var equipments=[];
            var index2=0;
            @for(equipment<-equipments) {
                @if(equipment.getRoom!=null&&equipment.getRoom.getRoomID==room.getRoomID){
                    var equipmentModel = {
                    id : '@equipment.getEquipmentID',
                    referenceNo:'@equipment.getEquipmentRefNo'
                    }
                    equipments[index2]=equipmentModel;
                    index2+=1
                }

            }

            var roomModel={
            id:'@room.getRoomID',
            name:'@room.getRoomName',
            size:'@room.getRoomSize',
            status:'@room.getStatus',
            remarks:'@room.getRemarks',
            venueID:'@room.getVenue.getVenueID',
            index:'@room.getIndexp',
            equipments:equipments
            };
            roomArray[index]=roomModel;
            index+=1
        }

    function viewRoomInfo(id){
    for(i=0;i<roomArray.length;i++) {
    var roomModel = roomArray[ i ] ;
    if ( roomModel[ "id" ] == ( id ) ) {
    showRoomModel(false,roomArray[i])
    }
    }
    }
    </script>
    <script type="text/javascript">
    var equipmentArray = [];
    var index=0
        @for(equipment <- equipments){
            var equipmentLocation='FLOATING AROUND';
            @if(!equipment.getRoom.eq(null)&& !equipment.getRoom.getVenue.eq(null)) {
                equipmentLocation = '@equipment.getRoom.getRoomName AT @equipment.getRoom.getVenue.getName'
            }
            var equipmentModel={
            id:'@equipment.getEquipmentID',
            name:'@equipment.getEquipmentName',
            iconURL:'@equipment.getIconURL',
            referenceNo:'@equipment.getEquipmentRefNo',
            status:'@equipment.getEquipmentStatus',
            platform:'@equipment.getPlatform.getPlatformID',
            remarks:'@equipment.getRemarks',
            equipmentLocation:equipmentLocation

            };
            @*var int=@equipment.getEquipmentID;*@
            equipmentArray[index]=equipmentModel;
            index+=1
        }
    index=0
    var platformArray = [];
        @for(platform <- platforms){
            var platformModel={
            id:'@platform.getPlatformID',
            name:'@platform.getName',
            iconURL:'@platform.getIconURL'
            };
            var int=@platform.getPlatformID;
            platformArray[index]=platformModel;
            index+=1
        }

    function viewEquipmentInfo(id){
    for(i=0;i<equipmentArray.length;i++) {
    var equipmentModel = equipmentArray[ i ] ;
    if ( equipmentModel[ "id" ] == ( id ) ) {
    showEquipmentModel(false,equipmentArray[i],platformArray)
    }
    }

    }
    </script>

</head>
<body style="overflow : scroll ;">
    <ul class="tab-bar grey-tab" style="margin-top: 30px;">
        <li id="room_overview" class="active" onclick="toggleView(0)" style="cursor : pointer ;">
            <a data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-home fa-2x"></i>
                </span>
                Overview
            </a>
        </li>
        <li id="room_room" onclick="toggleView(1)" style="cursor : pointer ;">
            <a  data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-bed fa-2x"></i>
                </span>
                Rooms
            </a>
        </li>
        <li id="room_equipment" onclick="toggleView(2)" style="cursor : pointer ;">
            <a data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-gamepad fa-2x"></i>
                </span>
                Equipments
            </a>
        </li>
    </ul>

    <div>
        <div id="roomPanel" class="panel panel-default table-responsive">
            <div class="panel-heading" style=" height : 50px;">
                <label class="pull-left" style="margin-top: 8px;">Rooms</label>
                <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                    <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                        @*Search :*@
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-right" style="width:100px;">
                            <span class="input-group-btn">
                                <button class="btn btn-success btn-sm" type="button" onclick="showRoomModel(true,false);">
                                    <i class="fa fa-plus"></i>
                                    Add Room
                                </button>
                            </span>
                        </div>
                    </label>
                    </div>
                    Search :
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-right" style="width:100px;">
                            <select id="searchRoomVenue" class="form-control input-sm inline-block"  style="width:100px;">
                                @for(venue<-venues){
                                    <option value="@venue.getVenueID">@venue.getName</option>
                                }

                            </select>
                        </div>
                    </label>
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-right" style="width:200px;">
                            <input id="searchRoomInput" class="input-sm form-control" type="text" placeholder="input text....">
                            <span class="input-group-btn">
                                <button onclick="searchRoom()" class="btn btn-success btn-sm" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </label>
                </div>

            </div>
            <div class="panel-body">
                <table class="table table-bordered table-condensed table-hover table-striped">
                    <thead>
                        <tr>
                            <th width="50px">Index</th>
                            <th width="100px">Venue</th>
                            <th width="100px">Name</th>
                            <th width="100px">Capacity</th>
                            <th width="250px">Equipments   <span class="label label-success">Working</span>   <span class="label label-warning">Has issues</span>   <span class="label label-danger">Damaged</span></th>
                            <th>Remarks</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for(room<-rooms){
                            <tr style="cursor : pointer ;">
                                <td onclick="viewRoomInfo(@room.getRoomID)">@room.getIndexp</td>
                                <td onclick="viewRoomInfo(@room.getRoomID)">@room.getVenue.getName</td>
                                <td onclick="viewRoomInfo(@room.getRoomID)">@room.getName</td>
                                <td onclick="viewRoomInfo(@room.getRoomID)">1 - @room.getRoomSize pax</td>
                                <td>
                                @for(equipment<-room.getEquipment){
                                    @if(equipment.getEquipmentStatus==Equipment.EQUIPMENTSTATUS.WORKING){
                                        <span onclick="viewEquipmentInfo(@equipment.getEquipmentID);" class="label label-success" style="cursor: pointer">ID: @equipment.getEquipmentRefNo|@equipment.getPlatform.getName</span>
                                    }else {
                                        @if(equipment.getEquipmentStatus==Equipment.EQUIPMENTSTATUS.HAS_ISSUES){
                                            <span onclick="viewEquipmentInfo(@equipment.getEquipmentID);" class="label label-warning" style="cursor: pointer">ID: @equipment.getEquipmentRefNo|@equipment.getPlatform.getName</span>
                                        }else{
                                            @if(equipment.getEquipmentStatus==Equipment.EQUIPMENTSTATUS.DAMAGED){
                                                <span onclick="viewEquipmentInfo(@equipment.getEquipmentID);" class="label label-danger" style="cursor: pointer">ID: @equipment.getEquipmentRefNo|@equipment.getPlatform.getName</span>
                                            }
                                        }
                                    }
                                }
                                </td>
                                <td onclick="viewRoomInfo(@room.getRoomID)">@room.getRemarks</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div>
        <div id="equipmentPanel" class="panel panel-default table-responsive">
            <div class="panel-heading" style=" height : 50px;">
                <label class="pull-left" style="margin-top: 8px;">Equipments</label>
                <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                    <label style="margin-bottom: -10px;margin-right: -5px;">
                        <div class="input-group pull-right" style="width:200px;">
                            <input id="searchEquipmentInput" class="input-sm form-control" type="text" placeholder="input text....">
                            <span class="input-group-btn">
                                <button onclick="searchEquipment()" class="btn btn-success btn-sm" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </label>
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-left" style="width:100px;">
                            <span class="input-group-btn">
                                <button class="btn btn-success btn-sm" type="button" onclick="showEquipmentModel(true,false);">
                                    <i class="fa fa-plus"></i>
                                    Add Equipment
                                </button>
                            </span>
                        </div>
                    </label>
                </div>

            </div>
            <div class="panel-body">
                <table class="table table-bordered table-condensed table-hover table-striped">
                    <thead>
                        <tr>
                            <th width="70px">ID</th>
                            <th width="100px">Name</th>
                            <th width="50px">Platform</th>
                            <th width="70px">Venue</th>
                            <th width="50px">Room</th>
                            <th width="50px">Status</th>
                            <th>Remarks</th>

                        </tr>
                    </thead>
                    <tbody>
                       @for(equipment<-equipments){
                           <tr onclick="viewEquipmentInfo(@equipment.getEquipmentID);" style="cursor : pointer ;">
                               <td>@equipment.getEquipmentRefNo</td>
                               <td>@equipment.getEquipmentName</td>
                               <td>@equipment.getPlatform.getName</td>
                               <td>
                               @if(!equipment.getRoom.eq(null) && !equipment.getRoom.getVenue.eq(null)){
                                   @equipment.getRoom.getVenue.getName
                               }
                                </td>
                               <td>
                               @if(!equipment.getRoom.eq(null) && !equipment.getRoom.getVenue.eq(null)){
                                   @equipment.getRoom.getName
                               }
                               </td>
                               <td><center>
                               @if(equipment.getEquipmentStatus==Equipment.EQUIPMENTSTATUS.WORKING){
                                   <span class="label label-success">WORKING</span>
                               }else {
                                   @if(equipment.getEquipmentStatus==Equipment.EQUIPMENTSTATUS.HAS_ISSUES){
                                       <span class="label label-warning">HAS ISSUES</span>
                                   }else{
                                       @if(equipment.getEquipmentStatus==Equipment.EQUIPMENTSTATUS.DAMAGED){
                                           <span class="label label-danger">DAMAGED</span>
                                       }else{
                                           @if(equipment.getEquipmentStatus==Equipment.EQUIPMENTSTATUS.ON_REPAIR){
                                               <span class="label label-info">ON_REPAIR</span>
                                           }else{
                                               <span class="label label-info">@equipment.getEquipmentStatus</span>
                                           }
                                       }
                                   }
                               }
                               </center>
                               </td>
                               <td>@equipment.getRemarks</td>
                           </tr>
                       }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal fade in" id="simpleModal" aria-hidden="false" style="display: none;">
        <div id="roomModel" class="modal-dialog" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Room :</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Index</label>
                        <div class="col-lg-5">
                            <input id="roomModelIndex" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Name</label>
                        <div class="col-lg-5">
                            <input id="roomModelName" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Capacity</label>
                        <div class="col-lg-5">
                            <input id="roomModelCapacity" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Venue</label>
                        <div class="col-lg-5">
                            <select id="roomModelVenue" class="form-control input-sm inline-block">
                            @for(venue<-venues){
                                <option value="@venue.getVenueID">@venue.getName</option>
                            }
                            </select>
                        </div>
                    </div>
                    <div class="form-group"  style="height:100px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Equipments</label>
                        <div class="col-lg-11">
                            <select id="roomModelEquipments" multiple="" class="form-control" style="padding: 0px;">
                                @for(equipment<-equipments){
                                    <option value="@equipment.getEquipmentID">@equipment.getEquipmentRefNo</option>
                                }
                            </select>
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:80px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Remarks</label>
                        <div class="col-lg-11">
                            <textarea style="resize: none;" id="roomModelRemarks" class="form-control" rows="4"></textarea>
                        </div><!-- /.col -->
                    </div>
                </div>
                <div class="modal-footer">
                    <a id="roomModelDelete" class="btn btn-danger btn-sm">Delete Room</a>
                    <a id="roomModelSave" class="btn btn-info btn-sm">Save changes</a>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
        <div id="equipmentModel" class="modal-dialog" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Equiment :</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">RefferenceNo</label>
                        <div class="col-lg-5">
                            <input id="equipmentModelRefferenceNo" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Name</label>
                        <div class="col-lg-5">
                            <input id="equipmentModelName" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Icon URL</label>
                        <div class="col-lg-5">
                            <input id="equipmentModelIconURL" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Location</label>
                        <div class="col-lg-5">
                            <input id="equipmentModelLocation" class="form-control" type="text" placeholder="input here..." readonly>
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Status</label>
                        <div class="col-lg-5">
                            <select id="equipmentModelStatus" class="form-control input-sm inline-block">
                                <option value="@Equipment.EQUIPMENTSTATUS.WORKING">@Equipment.EQUIPMENTSTATUS.WORKING</option>
                                <option value="@Equipment.EQUIPMENTSTATUS.HAS_ISSUES">@Equipment.EQUIPMENTSTATUS.HAS_ISSUES</option>
                                <option value="@Equipment.EQUIPMENTSTATUS.ON_REPAIR">@Equipment.EQUIPMENTSTATUS.ON_REPAIR</option>
                                <option value="@Equipment.EQUIPMENTSTATUS.ON_EVENT">@Equipment.EQUIPMENTSTATUS.ON_EVENT</option>
                            </select>
                        </div>
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Platform</label>
                        <div class="col-lg-5">
                            <select id="equipmentModelPlatform" class="form-control input-sm inline-block">
                            @for(platform<-platforms){
                                <option value="@platform.getPlatformID">@platform.getName</option>
                            }
                            </select>
                        </div>
                    </div><!-- /.col -->
                    <div class="form-group" style="height:80px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Remarks</label>
                        <div class="col-lg-11">
                            <textarea style="resize: none;" id="equipmentModelRemarks" class="form-control" rows="4"></textarea>
                        </div><!-- /.col -->
                    </div>
                </div>
                <div class="modal-footer">
                    <a id="equipmentModelDelete" class="btn btn-danger btn-sm">Delete Equipument</a>
                    <a id="equipmentModelSave" class="btn btn-info btn-sm">Save changes</a>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

</body>
</html>