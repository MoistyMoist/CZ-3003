@import models.common.Log
@import models.common.Staff

@(staffs :List[Staff],logs:List[Log])


<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script src="@controllers.admin.routes.Assets.versioned("javascripts/account.js")"></script>
    <script src="@controllers.admin.routes.Assets.versioned("javascripts/log.js")"></script>
    <script type="text/javascript">
    var staffArray = [];
    var index=0
        @for(staff <- staffs){
            var staffModel={
            staffID:'@staff.getStaffID',
            username :'@staff.getUsername',
            password:'@staff.getPassword',
            contactNo:'@staff.getContactNo',
            address:'@staff.getAddress',
            staffType:'@staff.getStaffType',
            nokName:'@staff.getNokName',
            nokContactNo:'@staff.getNokContactNo',
            nokAddress:'@staff.getNokAddress',
            nokRelationship:'@staff.getNokRelationship',
            accountStatus:'@staff.getAccountStatus'
            };
            staffArray[index]=staffModel;
            index+=1
        }
    function viewStaffInfo(id){
    for(i=0;i<staffArray.length;i++){
    var staffModel=staffArray[i];
    if(staffModel["staffID" ]==(id)){
    showStaffModel(false,staffArray[i])
    }
    }

    }
    </script>

</head>

<body  class="transparentscrollbar">
    <ul class="tab-bar grey-tab" style="margin-top: 30px;">
        <li id="account_overview" class="active" onclick="toggleView(0)" style="cursor: pointer">
            <a data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-home fa-2x"></i>
                </span>
                Overview
            </a>
        </li>
        <li id="account_account" onclick="toggleView(1)" style="cursor: pointer">
            <a data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-key fa-2x"></i>
                </span>
                Accounts
            </a>
        </li>
        <li id="account_log" onclick="toggleView(2)" style="cursor: pointer">
            <a data-toggle="tab">
                <span class="block text-center">
                    <i class="fa fa-list-alt fa-2x"></i>
                </span>
                Logs
            </a>
        </li>
    </ul>

    <div>
        <div id="accountPanel" class="panel panel-default table-responsive">
            <div class="panel-heading" style=" height : 50px;">
                <label class="pull-left" style="margin-top: 8px;">Accounts</label>
                <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                    @*Search :*@
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-left" style="width:100px;">
                            <span class="input-group-btn">
                                <button class="btn btn-success btn-sm" type="button" onclick="showStaffModel(true,false);">
                                    <i class="fa fa-plus"></i>
                                    Add Account
                                </button>
                            </span>
                        </div>
                    </label>
                </div>

            </div>
            <div class="panel-body">
            <table class="table table-bordered table-condensed table-hover table-striped">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Account Type</th>
                        <th>Account Status</th>
                    </tr>
                </thead>
                <tbody>
                    @for(staff<-staffs){
                        <tr onclick="viewStaffInfo(@staff.getStaffID)" style="cursor: pointer">
                            <td>@staff.getUsername</td>
                            <td>@staff.getStaffType.toString</td>
                            <td>
                                @if(staff.getAccountStatus.equals(Staff.AccountStatus.ACTIVE)){
                                    <span class="label label-success">ACTIVE</span>
                                }else{
                                    <span class="label label-danger">DISABLED</span>
                                }
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        </div>
    </div>

    <div>
        <div id="logPanel" class="panel panel-default table-responsive">
            <div class="panel-heading" style=" height : 50px;">
                <label class="pull-left" style="margin-top: 8px;">Logs</label>
                <div class="form-horizontal pull-right" id="dataTable_filter" style="margin-bottom: 10px;">
                    Search from :
                    <label style="margin-bottom: -10px;">
                        <div class="input-group pull-left" style="width:200px;">
                            <input id="searchLogDate" class="input-sm form-control" type="date">
                            <span class="input-group-btn">
                                <button class="btn btn-success btn-sm" type="button" onclick="searchStaffLogs()">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </label>
                </div>
            </div>

            <div class="panel-body">
                <table class="table table-bordered table-condensed table-hover table-striped">
                    <thead>
                        <tr>
                            <th width="100px">Date</th>
                            <th width="150px">Staff</th>
                            <th width="200px">Action</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for(log<-logs){
                            <tr style="cursor: pointer">
                                <td>@log.getDateTime</td>
                                <td>
                                @if(log.getStaff!=null){
                                    @log.getStaff.getUsername
                                }else{
                                    NULL
                                }
                                </td>
                                <td>@log.getAction</td>
                                <td>@log.getDescription</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    <!-- model -->
    <div class="modal fade in" id="staffModel" aria-hidden="false" style="display: none;">
        <div class="modal-dialog" style="width: 900px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    <h4>Account</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Username</label>
                        <div class="col-lg-5">
                            <input id="staffModelUsername" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Password</label>
                        <div class="col-lg-5">
                            <input id="staffModelPassword" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Contact</label>
                        <div class="col-lg-5">
                            <input id="staffModelContact" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="label-checkbox col-lg-1" style="padding:0px;text-align:right;color: #777;">Account Type</label>
                        <div class="col-lg-5">
                            <select  id="staffModelAccountType" class="form-control input-sm inline-block">
                                <option selected value="SUPERADMIN">@Staff.StaffType.SUPERADMIN</option>
                                <option value="ADMIN">@Staff.StaffType.ADMIN</option>
                                <option value="TEMP">@Staff.StaffType.TEMP</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group" style="height:80px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">Address</label>
                        <div class="col-lg-11">
                            <textarea style="resize: none;" id="staffModelAddress" class="form-control" rows="4"></textarea>
                        </div><!-- /.col -->
                    </div>
                    <hr/>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">NOK Name</label>
                        <div class="col-lg-5">
                            <input id="staffModelNOKName" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                        <label class="col-lg-1 control-label" style="padding:0px;text-align: right;color: #777;">Relationship Type</label>
                        <div class="col-lg-5">
                            <input id="staffModelRelationshipType" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->
                    </div>
                    <div class="form-group" style="height:30px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">NOK Contact</label>
                        <div class="col-lg-5">
                            <input id="staffModelNOKContact" class="form-control" type="text" placeholder="input here...">
                        </div><!-- /.col -->

                    </div>
                    <div class="form-group" style="height:80px;margin-top: 10px;">
                        <label class="col-lg-1 control-label" style="padding:0px;padding-top:7px;text-align: right;color: #777;">NOK Address</label>
                        <div class="col-lg-11">
                            <textarea style="resize: none;" id="staffModelNOKAddress" class="form-control" rows="4"></textarea>
                        </div><!-- /.col -->
                    </div>
                </div>
                <div class="modal-footer">
                    <a id="staffModelDisable" class="btn btn-sm">Disable Account</a>
                    <a id="staffModelSave" class="btn btn-info btn-sm">Save changes</a>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
</body>
</html>